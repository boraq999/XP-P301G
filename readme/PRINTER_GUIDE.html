<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>دليل الطباعة الحرارية - المتفوقون الأوائل</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@300;500;700&display=swap');

        body {
            font-family: 'Tajawal', sans-serif;
            background-color: #f0f2f5;
            color: #333;
            line-height: 1.8;
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 850px;
            margin: 0 auto;
            background: #fff;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        h1 {
            color: #1e293b;
            text-align: center;
            border-bottom: 3px solid #38bdf8;
            padding-bottom: 15px;
            margin-bottom: 30px;
        }

        h2 {
            color: #2563eb;
            background: #eff6ff;
            padding: 10px 15px;
            border-right: 5px solid #2563eb;
            border-radius: 0 5px 5px 0;
            margin-top: 40px;
        }

        h3 {
            color: #0f172a;
            margin-top: 25px;
        }

        p {
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .warning-box {
            background-color: #fff7ed;
            border: 1px solid #fb923c;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .success-box {
            background-color: #f0fdf4;
            border: 1px solid #4ade80;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        code {
            background: #f1f5f9;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', Courier, monospace;
            color: #e11d48;
            font-weight: bold;
        }

        .highlight {
            color: #2563eb;
            font-weight: bold;
        }

        .footer {
            text-align: center;
            margin-top: 50px;
            color: #64748b;
            font-size: 0.9rem;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>دليل التعامل مع الطابعات الحرارية (XP-P301G)</h1>

        <p dir="rtl">هذا الدليل يشرح الأسرار التقنية خلف مشاكل الطباعة ولماذا نستخدم لغة البرمجة الخام بدلاً من الطرق
            التقليدية.</p>

        <h2>1. مشكلة نظام الطباعة الرسومي (PDF / GDI)</h2>
        <p>عند استخدام "طباعة المتصفح" أو ملفات PDF، يستخدم ويندوز نظاماً يسمى <span class="highlight">GDI</span>. هذا
            النظام يحول كل شيء إلى "صورة بكسلات" معقدة.</p>

        <div class="warning-box">
            <h3>لماذا يفشل هذا مع طابعتك الحرارية؟</h3>
            <ul>
                <li><strong>اللغة المخالفة:</strong> الطابعة الحرارية هي "طابعة أسطر" متسلسلة، وليست مصممة لمعالجة صور
                    PDF الثقيلة.</li>
                <li><strong>الرموز الصينية:</strong> محرك الطابعة يستلم بيانات ثنائية معقدة ويحاول تفسيرها كنصوص، وبما
                    أنها بيانات "عشوائية" بالنسبة له، فإنه يختار رموزاً عشوائية من ذاكرته (غالباً صينية).</li>
                <li><strong>الذاكرة:</strong> سعة الذاكرة المؤقتة (Buffer) في الطابعة صغيرة جداً، وملفات PDF "تخنق" هذه
                    الذاكرة.</li>
            </ul>
        </div>

        <h2>2. الحل السحري: لغة ESC/POS (اللغة الخام)</h2>
        <p>بدلاً من إرسال مستندات معقدة، نحن نرسل الآن أوامر <span class="highlight">ESC/POS</span>. وهي اللغة الأصلية
            والوحيدة التي صُممت لهذه الطابعات.</p>

        <div class="success-box">
            <h3>مميزات هذه الطريقة:</h3>
            <ul>
                <li><strong>الخفة المتناهية:</strong> نرسل أوامر نصية بضعة كيلوبايتات بدلاً من ميجابايتات الصور.</li>
                <li><strong>الوضوح التام:</strong> رأس الطابعة يعرف بالضبط أين يرسم الخطوط وأين يتوقف.</li>
                <li><strong>التحكم بالقطع:</strong> أوامر القص (Cut) والتغذية (Feed) تنفذ بدقة بكسل واحدة.</li>
            </ul>
        </div>

        <h2>3. لماذا تستمر الطابعة في سحب الورق دون توقف؟</h2>
        <p>عند حدوث خطأ في ترجمة PDF، الطابعة تضيع في البيانات وتحدث ظاهرتان:</p>
        <ol>
            <li><strong>فقدان أمر النهاية:</strong> الطابعة لا تستلم أبداً كود "نهاية المستند"، فتبحث عنه بسحب الورق إلى
                ما لا نهاية.</li>
            <li><strong>أوامر تزييف السحب:</strong> البيانات العشوائية قد تحتوي بالصدفة على "أوامر سحب" برمجية، فتقوم
                الطابعة بتنفيذها فوراً.</li>
        </ol>

        <h2>4. طريقة "المسار المشترك" (The Professional Fix)</h2>
        <p>الحل الذي اعتمدناه الآن هو إرسال الأوامر عبر المسار المشترك: <code>\\localhost\XP80</code>.</p>
        <p>هذا يضمن أن ويندوز يمرر البيانات <strong>كما هي (Raw Data)</strong> دون أي تدخل أو محاولة لمعالجتها، مما ينهي
            مشكلة الرموز الغريبة للأبد.</p>

        <div class="footer">
            تم إعداد هذا الدليل لشركة المتفوقون الأوائل بواسطة Antigravity AI &copy; 2026
        </div>
    </div>
</body>

</html>